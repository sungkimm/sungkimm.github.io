
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://sungkimm.github.io/kubernetes/controller/">
      
      <link rel="icon" href="../../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.4.1, mkdocs-material-8.5.7">
    
    
      
        <title>controller - sungkimm</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#controller" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="sungkimm" class="md-header__button md-logo" aria-label="sungkimm" data-md-component="logo">
      
  <img src="../../assets/images/zebra/home.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            sungkimm
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              controller
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/sungkimm/sungkimm.github.io.git" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    sungkimm.github.io
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../Projects/" class="md-tabs__link">
        Projects
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../" class="md-tabs__link md-tabs__link--active">
        kubernetes
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="sungkimm" class="md-nav__button md-logo" aria-label="sungkimm" data-md-component="logo">
      
  <img src="../../assets/images/zebra/home.png" alt="logo">

    </a>
    sungkimm
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/sungkimm/sungkimm.github.io.git" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    sungkimm.github.io
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../Projects/">Projects</a>
          
            <label for="__nav_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Projects" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Projects
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_2" type="checkbox" id="__nav_1_2" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_2">
          gempick
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="gempick" data-md-level="2">
        <label class="md-nav__title" for="__nav_1_2">
          <span class="md-nav__icon md-icon"></span>
          gempick
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_2_1" type="checkbox" id="__nav_1_2_1" >
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_2_1">
          General
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="General" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_2_1">
          <span class="md-nav__icon md-icon"></span>
          General
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Projects/gempick/general/example/" class="md-nav__link">
        Example
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_2_2" type="checkbox" id="__nav_1_2_2" >
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_2_2">
          User Auth
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="User Auth" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_2_2">
          <span class="md-nav__icon md-icon"></span>
          User Auth
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Projects/gempick/user-auth/architecture/" class="md-nav__link">
        Architecture
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Projects/gempick/user-auth/database/" class="md-nav__link">
        Database
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Projects/gempick/user-auth/etc/" class="md-nav__link">
        Etc
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_2_3" type="checkbox" id="__nav_1_2_3" >
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_2_3">
          Microservice2
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Microservice2" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_2_3">
          <span class="md-nav__icon md-icon"></span>
          Microservice2
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Projects/gempick/microservice2/example/" class="md-nav__link">
        Example
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_2_4" type="checkbox" id="__nav_1_2_4" >
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_2_4">
          Microservice3
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Microservice3" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_2_4">
          <span class="md-nav__icon md-icon"></span>
          Microservice3
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Projects/gempick/microservice3/example/" class="md-nav__link">
        Example
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_2_5" type="checkbox" id="__nav_1_2_5" >
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_2_5">
          Dev Materials
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Dev Materials" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_2_5">
          <span class="md-nav__icon md-icon"></span>
          Dev Materials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Projects/gempick/dev-materials/restAPI/" class="md-nav__link">
        RESTAPI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Projects/gempick/dev-materials/microservice%28k8s%29/microservice%28k8s%29/" class="md-nav__link">
        MicroService(k8s)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Projects/gempick/dev-materials/aws/" class="md-nav__link">
        Aws
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Projects/gempick/dev-materials/git/" class="md-nav__link">
        Git
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_2_6" type="checkbox" id="__nav_1_2_6" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_2_6">
          Development Policy
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Development Policy" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_2_6">
          <span class="md-nav__icon md-icon"></span>
          Development Policy
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Projects/gempick/development-policy/source-code/" class="md-nav__link">
        Source code
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Projects/gempick/development-policy/git/" class="md-nav__link">
        Git
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Projects/gempick/development-policy/microservice/" class="md-nav__link">
        Microservice
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Projects/gempick/development-policy/API-documentation/" class="md-nav__link">
        API documentation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Projects/gempick/development-policy/aws/" class="md-nav__link">
        Aws
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_2_7" type="checkbox" id="__nav_1_2_7" >
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_2_7">
          Meeting
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Meeting" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_2_7">
          <span class="md-nav__icon md-icon"></span>
          Meeting
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Projects/gempick/meeting/example/" class="md-nav__link">
        Example
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1_2_8" type="checkbox" id="__nav_1_2_8" >
      
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_1_2_8">
          ETC
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="ETC" data-md-level="3">
        <label class="md-nav__title" for="__nav_1_2_8">
          <span class="md-nav__icon md-icon"></span>
          ETC
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Projects/gempick/etc/example/" class="md-nav__link">
        Example
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../">kubernetes</a>
          
            <label for="__nav_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="kubernetes" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          kubernetes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          controller
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        controller
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-replication-controller" class="md-nav__link">
    1. Replication Controller
  </a>
  
    <nav class="md-nav" aria-label="1. Replication Controller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#replicationcontroller-yaml-example" class="md-nav__link">
    ReplicationController YAML Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#edit-number-of-scales" class="md-nav__link">
    Edit number of scales
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-replication-controller" class="md-nav__link">
    Delete Replication Controller
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-replicaset" class="md-nav__link">
    2. ReplicaSet
  </a>
  
    <nav class="md-nav" aria-label="2. ReplicaSet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#replicaset-yaml-example" class="md-nav__link">
    ReplicaSet YAML Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-deployment" class="md-nav__link">
    3. Deployment
  </a>
  
    <nav class="md-nav" aria-label="3. Deployment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deployment-yaml-example" class="md-nav__link">
    Deployment YAML Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-deployment-works-example" class="md-nav__link">
    How Deployment works example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-deployment" class="md-nav__link">
    Delete Deployment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-replicaset" class="md-nav__link">
    Delete ReplicaSet
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rolling-update-rolling-backdeployment" class="md-nav__link">
    Rolling update &amp; Rolling Back(Deployment)
  </a>
  
    <nav class="md-nav" aria-label="Rolling update &amp; Rolling Back(Deployment)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rolling-update" class="md-nav__link">
    Rolling update
  </a>
  
    <nav class="md-nav" aria-label="Rolling update">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-rolling-update-via-set-command" class="md-nav__link">
    1. Rolling-update via set command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-rolling-update-via-yaml-file" class="md-nav__link">
    2. Rolling-update via YAML file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-rolling-update-via-edit-command" class="md-nav__link">
    3. Rolling-update via edit command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rolling-update-status-check" class="md-nav__link">
    Rolling-update status check
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rolling-update-pauseresume" class="md-nav__link">
    Rolling-update pause/resume
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-control-rolling-update" class="md-nav__link">
    How to control Rolling-update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rollback" class="md-nav__link">
    Rollback
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-daemonset" class="md-nav__link">
    4. DaemonSet
  </a>
  
    <nav class="md-nav" aria-label="4. DaemonSet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#daemonset-example" class="md-nav__link">
    DaemonSet Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#daemonset-rolling-update-via-apply-command" class="md-nav__link">
    DaemonSet rolling-update via apply command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#daemonset-delete" class="md-nav__link">
    DaemonSet delete
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-statefulset" class="md-nav__link">
    5. StatefulSet
  </a>
  
    <nav class="md-nav" aria-label="5. StatefulSet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#statefulset-example-yaml" class="md-nav__link">
    statefulSet example YAML
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pods-name-example" class="md-nav__link">
    Pod's name example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scale-up-down" class="md-nav__link">
    scale up &amp; down
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#statefulset-rolling-update" class="md-nav__link">
    StatefulSet Rolling-update
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-job-controller" class="md-nav__link">
    6. Job Controller
  </a>
  
    <nav class="md-nav" aria-label="6. Job Controller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#when-a-pod-is-failed" class="md-nav__link">
    When a pod is failed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backofflimit-policy" class="md-nav__link">
    backoffLimit policy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#job-controller-yaml-example" class="md-nav__link">
    Job Controller YAML example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-a-task-completed" class="md-nav__link">
    When a task completed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-a-task-fails-and-restartpolicy-never-recommanded" class="md-nav__link">
    When a task fails and restartPolicy: Never (Recommanded)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-a-task-fails-and-restartpolicy-onfailure" class="md-nav__link">
    When a task fails and restartPolicy: OnFailure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-cronjob" class="md-nav__link">
    7. CronJob
  </a>
  
    <nav class="md-nav" aria-label="7. CronJob">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cron-schedule-syntax" class="md-nav__link">
    Cron schedule syntax
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-replication-controller" class="md-nav__link">
    1. Replication Controller
  </a>
  
    <nav class="md-nav" aria-label="1. Replication Controller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#replicationcontroller-yaml-example" class="md-nav__link">
    ReplicationController YAML Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#edit-number-of-scales" class="md-nav__link">
    Edit number of scales
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-replication-controller" class="md-nav__link">
    Delete Replication Controller
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-replicaset" class="md-nav__link">
    2. ReplicaSet
  </a>
  
    <nav class="md-nav" aria-label="2. ReplicaSet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#replicaset-yaml-example" class="md-nav__link">
    ReplicaSet YAML Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-deployment" class="md-nav__link">
    3. Deployment
  </a>
  
    <nav class="md-nav" aria-label="3. Deployment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deployment-yaml-example" class="md-nav__link">
    Deployment YAML Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-deployment-works-example" class="md-nav__link">
    How Deployment works example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-deployment" class="md-nav__link">
    Delete Deployment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete-replicaset" class="md-nav__link">
    Delete ReplicaSet
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rolling-update-rolling-backdeployment" class="md-nav__link">
    Rolling update &amp; Rolling Back(Deployment)
  </a>
  
    <nav class="md-nav" aria-label="Rolling update &amp; Rolling Back(Deployment)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rolling-update" class="md-nav__link">
    Rolling update
  </a>
  
    <nav class="md-nav" aria-label="Rolling update">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-rolling-update-via-set-command" class="md-nav__link">
    1. Rolling-update via set command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-rolling-update-via-yaml-file" class="md-nav__link">
    2. Rolling-update via YAML file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-rolling-update-via-edit-command" class="md-nav__link">
    3. Rolling-update via edit command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rolling-update-status-check" class="md-nav__link">
    Rolling-update status check
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rolling-update-pauseresume" class="md-nav__link">
    Rolling-update pause/resume
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-control-rolling-update" class="md-nav__link">
    How to control Rolling-update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rollback" class="md-nav__link">
    Rollback
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-daemonset" class="md-nav__link">
    4. DaemonSet
  </a>
  
    <nav class="md-nav" aria-label="4. DaemonSet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#daemonset-example" class="md-nav__link">
    DaemonSet Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#daemonset-rolling-update-via-apply-command" class="md-nav__link">
    DaemonSet rolling-update via apply command
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#daemonset-delete" class="md-nav__link">
    DaemonSet delete
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-statefulset" class="md-nav__link">
    5. StatefulSet
  </a>
  
    <nav class="md-nav" aria-label="5. StatefulSet">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#statefulset-example-yaml" class="md-nav__link">
    statefulSet example YAML
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pods-name-example" class="md-nav__link">
    Pod's name example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scale-up-down" class="md-nav__link">
    scale up &amp; down
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#statefulset-rolling-update" class="md-nav__link">
    StatefulSet Rolling-update
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-job-controller" class="md-nav__link">
    6. Job Controller
  </a>
  
    <nav class="md-nav" aria-label="6. Job Controller">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#when-a-pod-is-failed" class="md-nav__link">
    When a pod is failed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backofflimit-policy" class="md-nav__link">
    backoffLimit policy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#job-controller-yaml-example" class="md-nav__link">
    Job Controller YAML example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-a-task-completed" class="md-nav__link">
    When a task completed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-a-task-fails-and-restartpolicy-never-recommanded" class="md-nav__link">
    When a task fails and restartPolicy: Never (Recommanded)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-a-task-fails-and-restartpolicy-onfailure" class="md-nav__link">
    When a task fails and restartPolicy: OnFailure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-cronjob" class="md-nav__link">
    7. CronJob
  </a>
  
    <nav class="md-nav" aria-label="7. CronJob">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cron-schedule-syntax" class="md-nav__link">
    Cron schedule syntax
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="controller">Controller</h1>
<p>Controller ensures that the specified number of pod replicas are running at any point of time. </p>
<ol>
<li>Replication Controller</li>
<li>ReplicaSet</li>
<li>Deployment(Rolling-Update &amp; Rollback)</li>
<li>DaemonSet</li>
<li>StatefulSet</li>
<li>Job</li>
<li>CronJob  </li>
</ol>
<h2 id="1-replication-controller">1. Replication Controller</h2>
<h4 id="replicationcontroller-yaml-example">ReplicationController YAML Example</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span><span class="w"></span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ReplicationController</span><span class="w"></span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx-rep</span><span class="w"></span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">  </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span><span class="w"></span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">  </span><span class="nt">selector</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">    </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">webui</span><span class="w">              </span><span class="c1"># must match with one of pod labels</span><span class="w"></span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">    </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2.1&quot;</span><span class="w">  </span><span class="c1"># can be multiple, if multiple labels then selector uses &quot;AND&quot; condition</span><span class="w"></span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">  </span><span class="nt">template</span><span class="p">:</span><span class="w">                 </span><span class="c1"># pod template</span><span class="w"></span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="w">    </span><span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx-pod</span><span class="w"></span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="w">      </span><span class="nt">labels</span><span class="p">:</span><span class="w">               </span><span class="c1"># pod labels</span><span class="w"></span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="w">        </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">webui</span><span class="w">      </span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="w">        </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2.1&quot;</span><span class="w">   </span><span class="c1"># can have multiple lables</span><span class="w"></span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="w">    </span><span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="w">      </span><span class="nt">containers</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx-container</span><span class="w"></span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="w">          </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx</span><span class="w"></span>
</code></pre></div>
<h4 id="edit-number-of-scales">Edit number of scales</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>kubectl edit rc &lt;rc-name&gt;
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="c1"># or </span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>kubectl scale rc &lt;rc-name&gt; --replicas<span class="o">=</span>N
</code></pre></div>
<h4 id="delete-replication-controller">Delete Replication Controller</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1"># this will delete the entire running pod..</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>kubectl delete rc &lt;rc-name&gt;
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="c1"># --cascade=false will keep pods alive</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>kubectl delete rc &lt;rc-name&gt; --cascade<span class="o">=</span><span class="nb">false</span>
</code></pre></div>
<h2 id="2-replicaset">2. ReplicaSet</h2>
<p>Almost identical to replication controller, but provides diverse selector options.  </p>
<h4 id="replicaset-yaml-example">ReplicaSet YAML Example</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span><span class="w"></span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ReplicaSet</span><span class="w"></span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx-rep</span><span class="w"></span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">  </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span><span class="w"></span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">  </span><span class="nt">selector</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">webui</span><span class="w"></span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">    </span><span class="nt">matchExpressions</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="nv">version</span><span class="p p-Indicator">,</span><span class="nt"> operator</span><span class="p">:</span><span class="w"> </span><span class="nv">In</span><span class="p p-Indicator">,</span><span class="nt"> values</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;2.1&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;2.2&quot;</span><span class="p p-Indicator">]}</span><span class="w"></span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="w">    </span><span class="c1"># - {key: version, operator: Exists }</span><span class="w"></span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="w">  </span><span class="nt">template</span><span class="p">:</span><span class="w">                 </span><span class="c1"># pod template</span><span class="w"></span>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="w">    </span><span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx-pod</span><span class="w"></span>
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="w">      </span><span class="nt">labels</span><span class="p">:</span><span class="w">               </span><span class="c1"># pod labels</span><span class="w"></span>
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a><span class="w">        </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">webui</span><span class="w">      </span>
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a><span class="w">        </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2.1&quot;</span><span class="w">   </span><span class="c1"># can have multiple lables</span><span class="w"></span>
<a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a><span class="w">    </span><span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-3-20" name="__codelineno-3-20" href="#__codelineno-3-20"></a><span class="w">      </span><span class="nt">containers</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-3-21" name="__codelineno-3-21" href="#__codelineno-3-21"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx-container</span><span class="w"></span>
<a id="__codelineno-3-22" name="__codelineno-3-22" href="#__codelineno-3-22"></a><span class="w">          </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx</span><span class="w"></span>
</code></pre></div>
<p><code>Operator</code> type:<br />
* In
* NotIn
* Exists: if key matches, include every values
* DoesNotExist</p>
<h2 id="3-deployment">3. Deployment</h2>
<hr />
<p>Deployment controls <code>ReplicaSet</code>  </p>
<p><code>Deployment</code> -&gt; <code>ReplicaSet</code> -&gt; <code>Pod</code>  </p>
<p><code>Deployment</code> is exactly same as <code>ReplicaSet</code> unless you define <code>rollingupdate</code>.  </p>
<h4 id="deployment-yaml-example">Deployment YAML Example</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span><span class="w"></span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span><span class="w"></span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx-dep</span><span class="w"></span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">  </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span><span class="w"></span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">  </span><span class="nt">selector</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">webui</span><span class="w"></span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="w">  </span><span class="nt">template</span><span class="p">:</span><span class="w">                 </span><span class="c1"># pod template</span><span class="w"></span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="w">    </span><span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx-pod</span><span class="w"></span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="w">      </span><span class="nt">labels</span><span class="p">:</span><span class="w">               </span><span class="c1"># pod labels</span><span class="w"></span>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="w">        </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">webui</span><span class="w">      </span>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="w">        </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2.1&quot;</span><span class="w">   </span><span class="c1"># can have multiple lables</span><span class="w"></span>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="w">    </span><span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a><span class="w">      </span><span class="nt">containers</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx-container</span><span class="w"></span>
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a><span class="w">          </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx</span><span class="w"></span>
</code></pre></div>
<h4 id="how-deployment-works-example">How Deployment works example</h4>
<p><code>Deployment</code> -&gt; <code>ReplicaSet</code> -&gt; <code>Pod</code><br />
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>$ kubectl get deploy,rs,pod    
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>NAME                        READY   UP-TO-DATE   AVAILABLE   AGE
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>deployment.apps/nginx-dep   <span class="m">3</span>/3     <span class="m">3</span>            <span class="m">3</span>           30s
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>NAME                                   DESIRED   CURRENT   READY   AGE
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>replicaset.apps/nginx-dep-546b4b7cbc   <span class="m">3</span>         <span class="m">3</span>         <span class="m">3</span>       30s
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>NAME                             READY   STATUS    RESTARTS   AGE
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>pod/nginx-dep-546b4b7cbc-d29qt   <span class="m">1</span>/1     Running   <span class="m">0</span>          30s
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>pod/nginx-dep-546b4b7cbc-f7sw9   <span class="m">1</span>/1     Running   <span class="m">0</span>          30s
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>pod/nginx-dep-546b4b7cbc-q75cg   <span class="m">1</span>/1     Running   <span class="m">0</span>          30s
</code></pre></div></p>
<h4 id="delete-deployment">Delete Deployment</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>kubectl delete deployments &lt;dp-name&gt;
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="c1"># or</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>kubectl delete -f path/to/dep.yml
</code></pre></div>
<h4 id="delete-replicaset">Delete ReplicaSet</h4>
<p>If <code>ReplicaSet</code> is deleted, then <code>Deployment</code> will re-schedule <code>ReplicaSet</code> again, then <code>ReplicaSet</code> will create <code>pod</code>.   </p>
<h2 id="rolling-update-rolling-backdeployment">Rolling update &amp; Rolling Back(Deployment)</h2>
<hr />
<p>There are 3 ways to apply <code>rolling-update</code>.<br />
1. <code>set</code> command
2. YAML apply
3. <code>edit</code> command</p>
<h3 id="rolling-update">Rolling update</h3>
<h4 id="1-rolling-update-via-set-command">1. Rolling-update via <code>set</code> command</h4>
<p><code>set</code> command help you make changes to existing application resources.  Run the following command to update <code>deployment</code> while deployment is already up and run.<br />
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>kubectl <span class="nb">set</span> image deployment &lt;deploy-name&gt; &lt;container-name&gt;<span class="o">=</span>&lt;new-ver-image&gt; --record
</code></pre></div></p>
<h4 id="2-rolling-update-via-yaml-file">2. Rolling-update via YAML file</h4>
<p>Modify the <code>image version</code> and <code>annotations</code>, then <code>kubectl apply</code> to perform rolling-update.  Applying the modified yaml file is nicer way for rolling-update because it keeps track of version information on yaml file. 
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deployment</span><span class="w"></span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">  </span><span class="nt">annotations</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">    </span><span class="nt">kubernetes.io/change-cause</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">version 1.16</span><span class="w"> </span><span class="c1"># change this</span><span class="w"></span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="nn">...</span><span class="w"></span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="w">    </span><span class="nt">containers</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">web</span><span class="w"></span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">image</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx:1.16</span><span class="w">  </span><span class="c1"># change image version</span><span class="w"></span>
</code></pre></div>
The value of <code>kubernetes.io/change-cause</code> key gets tracked on <code>rollout history</code>.  </p>
<p>Apply rolling-update via YAML after modifying YAML file.<br />
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>$ kubectl apply -f path/to/deploy.yml
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>$ kubectl rollout <span class="nb">history</span> deployment &lt;dep-name&gt;
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="c1"># ex) </span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>deployment.apps/nginx-dep 
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>REVISION  CHANGE-CAUSE
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="m">1</span>         version <span class="m">1</span>.15
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="m">2</span>         version <span class="m">1</span>.16
</code></pre></div></p>
<h4 id="3-rolling-update-via-edit-command">3. Rolling-update via <code>edit</code> command</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>$ kubectl edit deployment &lt;dep-name&gt; --record
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="c1"># history check ex)</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>$ kubectl rollout <span class="nb">history</span> deploy nginx-dep  
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>deployment.apps/nginx-dep 
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>REVISION  CHANGE-CAUSE
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="m">1</span>         version <span class="m">1</span>.15
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="m">2</span>         kubectl edit deployment nginx-dep --record<span class="o">=</span><span class="nb">true</span>
</code></pre></div>
<h4 id="rolling-update-status-check">Rolling-update status check</h4>
<p>Check status of rolling-update while rolling-update is being executed.<br />
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>kubectl rollout status deployment &lt;deploy-name&gt;
</code></pre></div></p>
<h4 id="rolling-update-pauseresume">Rolling-update pause/resume</h4>
<p>Pause/resume rolling-update while rolling-update is being executed.<br />
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>kubectl rollout pause deployment &lt;deploy-name&gt;
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="c1"># resume</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>kubectl rollout resume deployment &lt;deploy-name&gt;
</code></pre></div></p>
<p>Rollout history check<br />
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>kubectl rollout <span class="nb">history</span> deployment &lt;deploy-name&gt;
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="c1"># ex) </span>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>deployment.apps/nginx-dep
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>REVISION  CHANGE-CAUSE
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="m">1</span>         kubectl create --filename<span class="o">=</span>controller/deployment.yml --record<span class="o">=</span><span class="nb">true</span>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="m">2</span>         kubectl <span class="nb">set</span> image deployment nginx-dep <span class="nv">web</span><span class="o">=</span>nginx:1.15 --record<span class="o">=</span><span class="nb">true</span>
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="m">3</span>         kubectl <span class="nb">set</span> image deployment nginx-dep <span class="nv">web</span><span class="o">=</span>nginx:1.16 --record<span class="o">=</span><span class="nb">true</span>
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="m">4</span>         kubectl <span class="nb">set</span> image deployment nginx-dep <span class="nv">web</span><span class="o">=</span>nginx:1.17 --record<span class="o">=</span><span class="nb">true</span>
</code></pre></div></p>
<h4 id="how-to-control-rolling-update">How to control Rolling-update</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="w">  </span><span class="nt">progressDeadlineSeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">600</span><span class="w"></span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="w">  </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span><span class="w"></span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="w">  </span><span class="nt">revisionHistoryLimit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span><span class="w"></span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="w">  </span><span class="nt">selector</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">webui</span><span class="w"></span>
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="w">  </span><span class="nt">strategy</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="w">    </span><span class="nt">rollingUpdate</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="w">      </span><span class="nt">maxSurge</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25%</span><span class="w"></span>
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="w">      </span><span class="nt">maxUnavailable</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25%</span><span class="w"></span>
<a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RollingUpdate</span><span class="w"></span>
</code></pre></div>
<p><code>progressDeadlineSeconds</code>: rollback the update if update takes too long.<br />
<code>revisionHistoryLimit</code>: the number of old ReplicaSets to retain to allow rollback.  </p>
<p><code>maxSurge</code>: the maximum number of Pods that can be created over the desired number of Pods. <br />
if <code>replicas=3</code> and <code>maxSurge=50%</code>,  3 x 50% = 2(round up).  2 + 3(replicas) = 5.  Thus, 2 additional pods gets created during rolling-update.  </p>
<p><code>maxUnavailable</code>: the maximum number of Pods that can be unavailable during the update process.
if <code>replicas=3</code> and <code>maxUnavailable=50%</code>, then 2 pods get terminated during rolling-update.  </p>
<h4 id="rollback">Rollback</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="c1"># rollback to the previous version</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>kubectl rollout undo deploy &lt;deploy-name&gt;
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="c1"># select the version to rollback(use the index from history)</span>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>kubectl rollout undo deploy &lt;deploy-name&gt; --to-revision<span class="o">=</span>N
</code></pre></div>
<h2 id="4-daemonset">4. DaemonSet</h2>
<p><code>DaemonSet</code> ensures that a particular pod gets placed every node(one pod at a node). The pod gets automatically scheduled/deleted as a new Node gets createed/deleted. </p>
<h4 id="daemonset-example"><code>DaemonSet</code> Example</h4>
<p><strong>IMPORTANT: No replicas attribute</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span><span class="w"></span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DaemonSet</span><span class="w"></span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx-daemonset</span><span class="w"></span>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="w">  </span><span class="nt">selector</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">webui</span><span class="w"></span>
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="w">  </span><span class="nt">template</span><span class="p">:</span><span class="w">                 </span><span class="c1"># pod template</span><span class="w"></span>
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="w">    </span><span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx-pod</span><span class="w"></span>
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a><span class="w">      </span><span class="nt">labels</span><span class="p">:</span><span class="w">               </span><span class="c1"># pod labels</span><span class="w"></span>
<a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a><span class="w">        </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">webui</span><span class="w">      </span>
<a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a><span class="w">    </span><span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a><span class="w">      </span><span class="nt">containers</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">web</span><span class="w"></span>
<a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a><span class="w">          </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx:1.15</span><span class="w"></span>
</code></pre></div></p>
<h4 id="daemonset-rolling-update-via-apply-command">DaemonSet rolling-update via <code>apply</code> command</h4>
<p>Edit YAML file(image version), then use <code>apply</code> command 
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>$ kubectl apply -f controller/daemonset.yml
</code></pre></div></p>
<p><strong>IMPORTANT</strong><br />
<code>DaemonSet</code> rolling-update behaves a bit different from <code>deployment</code> rolling-update. it doesn't create a new pod then terminate, but instead it terminates the pod then create a new pod. </p>
<p>rollout undo and checking history work in the same manner as <code>Deployment</code>.</p>
<h4 id="daemonset-delete">DaemonSet delete</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>kubectl delete ds &lt;daemonset-name&gt;
</code></pre></div>
<h2 id="5-statefulset">5. StatefulSet</h2>
<p>Manages the deployment and scaling of a set of Pods, and provides guarantees about <strong>the ordering and uniqueness</strong> of these Pods.</p>
<p>If you want to use storage volumes to provide persistence for your workload, you can use a StatefulSet as part of the solution.  </p>
<p><code>statefulSet</code> doesn't ensure a pod to be placed at each node like <code>daemonset</code>, but it ensures the order and name of pod. </p>
<h4 id="statefulset-example-yaml"><code>statefulSet</code> example YAML</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apps/v1</span><span class="w"></span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">StatefulSet</span><span class="w"></span>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx-stateful</span><span class="w"></span>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="w">  </span><span class="nt">replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span><span class="w"></span>
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="w">  </span><span class="nt">serviceName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sf-service</span><span class="w"></span>
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a><span class="w">  </span><span class="nt">podManagementPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Parallel</span><span class="w"> </span><span class="c1"># OrderedReady # optional</span><span class="w"></span>
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a><span class="w">  </span><span class="nt">selector</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a><span class="w">    </span><span class="nt">matchLabels</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a><span class="w">      </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">webui</span><span class="w"></span>
<a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a><span class="w">  </span><span class="nt">template</span><span class="p">:</span><span class="w">                 </span><span class="c1"># pod template</span><span class="w"></span>
<a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a><span class="w">    </span><span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a><span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx-pod</span><span class="w"></span>
<a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a><span class="w">      </span><span class="nt">labels</span><span class="p">:</span><span class="w">               </span><span class="c1"># pod labels</span><span class="w"></span>
<a id="__codelineno-19-16" name="__codelineno-19-16" href="#__codelineno-19-16"></a><span class="w">        </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">webui</span><span class="w">      </span>
<a id="__codelineno-19-17" name="__codelineno-19-17" href="#__codelineno-19-17"></a><span class="w">    </span><span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-19-18" name="__codelineno-19-18" href="#__codelineno-19-18"></a><span class="w">      </span><span class="nt">containers</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-19-19" name="__codelineno-19-19" href="#__codelineno-19-19"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">web</span><span class="w"></span>
<a id="__codelineno-19-20" name="__codelineno-19-20" href="#__codelineno-19-20"></a><span class="w">          </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx:1.15</span><span class="w"></span>
</code></pre></div>
<h4 id="pods-name-example">Pod's name example</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>$ kubectl get pod
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>nginx-stateful-0   <span class="m">1</span>/1     Running   <span class="m">0</span>          4m58s
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>nginx-stateful-1   <span class="m">1</span>/1     Running   <span class="m">0</span>          4m57s
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>nginx-stateful-2   <span class="m">1</span>/1     Running   <span class="m">0</span>          4m56s
</code></pre></div>
<p>If you delete nginx-stateful-1, then a pod with the exact same name gets scheduled again, but it doesn't guarantee to place the pod on the same node. </p>
<h4 id="scale-up-down">scale up &amp; down</h4>
<p>Check how pod's name changes when scale goes up/down.  </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>kubectl scale statefulset &lt;sf-name&gt; --replicas<span class="o">=</span>N
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="c1">## ex) from scale 3 to 5</span>
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>NAME               READY   STATUS    RESTARTS   AGE   IP          NODE      NOMINATED NODE   READINESS GATES
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a>nginx-stateful-0   <span class="m">1</span>/1     Running   <span class="m">0</span>          78s   <span class="m">10</span>.44.0.1   worker1   &lt;none&gt;           &lt;none&gt;
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>nginx-stateful-1   <span class="m">1</span>/1     Running   <span class="m">0</span>          77s   <span class="m">10</span>.36.0.4   worker2   &lt;none&gt;           &lt;none&gt;
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a>nginx-stateful-2   <span class="m">1</span>/1     Running   <span class="m">0</span>          75s   <span class="m">10</span>.44.0.2   worker1   &lt;none&gt;           &lt;none&gt;
<a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a>nginx-stateful-3   <span class="m">1</span>/1     Running   <span class="m">0</span>          12s   <span class="m">10</span>.36.0.5   worker2   &lt;none&gt;           &lt;none&gt;
<a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a>nginx-stateful-4   <span class="m">1</span>/1     Running   <span class="m">0</span>          10s   <span class="m">10</span>.44.0.3   worker1   &lt;none&gt;           &lt;none&gt;
<a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a>
<a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a>
<a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a>
<a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a><span class="c1"># ex) from scale 5 to 2</span>
<a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a>NAME               READY   STATUS    RESTARTS   AGE    IP          NODE      NOMINATED NODE   READINESS GATES
<a id="__codelineno-21-15" name="__codelineno-21-15" href="#__codelineno-21-15"></a>nginx-stateful-0   <span class="m">1</span>/1     Running   <span class="m">0</span>          117s   <span class="m">10</span>.44.0.1   worker1   &lt;none&gt;           &lt;none&gt;
<a id="__codelineno-21-16" name="__codelineno-21-16" href="#__codelineno-21-16"></a>nginx-stateful-1   <span class="m">1</span>/1     Running   <span class="m">0</span>          116s   <span class="m">10</span>.36.0.4   worker2   &lt;none&gt;           &lt;none&gt;
</code></pre></div>
<h4 id="statefulset-rolling-update"><code>StatefulSet</code> Rolling-update</h4>
<p>Rolling-update terminates the pod then create a new pod like <code>DaemonSet</code>.
It guarantees the pods to be placed on the same node with version changes. </p>
<h2 id="6-job-controller">6. Job Controller</h2>
<p><code>Job Controller</code> are primarily used for batch processing.  </p>
<p>In a nutshell, 
* Job(task) completed -&gt; Pod in completed status, but alive
* Job(task) fails -&gt; Pod gets recreated the specified time. Pods can be either terminated or alive depending on options on <code>restartPolicy</code></p>
<p>Check <a href="../pod/README.md#pod-lifecyle">pod's lifecyle</a> and how <code>restartPolicy</code> works in pod. <code>restartPolicy</code> manages container, not pod. </p>
<h3 id="when-a-pod-is-failed">When a pod is failed</h3>
<p>An entire Pod can also fail. ex) when the pod is kicked off the node (node is upgraded, rebooted, deleted, etc.), or if a container of the Pod fails and the <code>.spec.template.spec.restartPolicy = "Never"</code>. When a Pod fails, then the <code>Job controller</code> starts a new Pod. This means that your application needs to handle the case when it is restarted in a new pod.</p>
<h3 id="backofflimit-policy"><code>backoffLimit</code> policy</h3>
<p>You can fail a Job after some amount of retries. Set <code>.spec.backoffLimit</code> to specify the number of retries(pod recreation) before considering a Job as failed. Default is <code>.spec.backoffLimit=6</code>.  </p>
<h3 id="job-controller-yaml-example">Job Controller YAML example</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">batch/v1</span><span class="w"></span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Job</span><span class="w"></span>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx-job</span><span class="w"></span>
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="w">  </span><span class="c1"># completions: 5    # run N time</span><span class="w"></span>
<a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="w">  </span><span class="c1"># parallelism: 2</span><span class="w"></span>
<a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a><span class="w">  </span><span class="nt">activeDeadlineSeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span><span class="w"> </span><span class="c1"># pod terminated after activeDeadlineSeconds</span><span class="w"></span>
<a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a><span class="w">  </span><span class="nt">template</span><span class="p">:</span><span class="w">                 </span><span class="c1"># pod template</span><span class="w"></span>
<a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a><span class="w">    </span><span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a><span class="w">      </span><span class="nt">containers</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">centos-container</span><span class="w"></span>
<a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a><span class="w">          </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">centos:7</span><span class="w"></span>
<a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a><span class="w">          </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;bash&quot;</span><span class="p p-Indicator">]</span><span class="w"></span>
<a id="__codelineno-22-15" name="__codelineno-22-15" href="#__codelineno-22-15"></a><span class="w">          </span><span class="nt">args</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-22-16" name="__codelineno-22-16" href="#__codelineno-22-16"></a><span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;-c&quot;</span><span class="w"></span>
<a id="__codelineno-22-17" name="__codelineno-22-17" href="#__codelineno-22-17"></a><span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;echo</span><span class="nv"> </span><span class="s">&#39;Hello&#39;;</span><span class="nv"> </span><span class="s">sleep</span><span class="nv"> </span><span class="s">10;</span><span class="nv"> </span><span class="s">echo</span><span class="nv"> </span><span class="s">&#39;bye&#39;&quot;</span><span class="w"></span>
<a id="__codelineno-22-18" name="__codelineno-22-18" href="#__codelineno-22-18"></a><span class="w">      </span><span class="nt">restartPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Never</span><span class="w"></span>
<a id="__codelineno-22-19" name="__codelineno-22-19" href="#__codelineno-22-19"></a><span class="w">  </span><span class="nt">backoffLimit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span><span class="w"></span>
</code></pre></div>
<h3 id="when-a-task-completed">When a task completed</h3>
<p>Even if a task completed without a problem, the pod is still alive.  <code>restartPolicy: Always</code> is invalid value on Job.  </p>
<p>Output example
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>NAME              READY   STATUS      RESTARTS   AGE     IP          NODE      NOMINATED NODE   READINESS GATES
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a>nginx-job-skmg2   <span class="m">0</span>/1     Completed   <span class="m">0</span>          5m33s   <span class="m">10</span>.44.0.1   worker1   &lt;none&gt;           &lt;none&gt;
</code></pre></div></p>
<h3 id="when-a-task-fails-and-restartpolicy-never-recommanded">When a task fails and <code>restartPolicy: Never</code> (Recommanded)</h3>
<p><code>restartPolicy: Never</code> will not restart <strong>container</strong> even if it fails, thus the job(task) stays as failed, and 'Job Controller` will restart(create a new pod) the pod until the job backoff limit has been reached. <strong>Pods are still alive.</strong><br />
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="w">    </span><span class="nt">template</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="w">        </span><span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a><span class="w">            </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="w">            </span><span class="l l-Scalar l-Scalar-Plain">restartPolicy</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Never</span><span class="w"></span>
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="w">        </span><span class="nt">backoffLimit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span><span class="w"></span>
</code></pre></div></p>
<p>Result
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>$ kubectl get pod &lt;pod-name&gt;
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="c1"># example </span>
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>NAME              READY   STATUS       RESTARTS   AGE   IP          NODE      NOMINATED NODE   READINESS GATES
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>nginx-job-8xfmt   <span class="m">0</span>/1     StartError   <span class="m">0</span>          4s    <span class="m">10</span>.44.0.1   worker1   &lt;none&gt;           &lt;none&gt;
<a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>nginx-job-z6kdp   <span class="m">0</span>/1     StartError   <span class="m">0</span>          17s   <span class="m">10</span>.44.0.1   worker1   &lt;none&gt;           &lt;none&gt;
<a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a>nginx-job-z6pj4   <span class="m">0</span>/1     StartError   <span class="m">0</span>          20s   <span class="m">10</span>.44.0.1   worker1   &lt;none&gt;           &lt;none&gt;
</code></pre></div></p>
<h3 id="when-a-task-fails-and-restartpolicy-onfailure">When a task fails and <code>restartPolicy: OnFailure</code></h3>
<p><code>restartPolicy: OnFailure</code> restarts <strong>container</strong> when fails. Once the job backoff limit has been reached, your Pod running the Job will be <strong>terminated(pod dies)</strong>. This makes debugging the job's executable mroe difficult. </p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="w">    </span><span class="nt">template</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="w">        </span><span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a><span class="w">            </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a><span class="w">            </span><span class="l l-Scalar l-Scalar-Plain">restartPolicy</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">OnFailure</span><span class="w"></span>
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a><span class="w">        </span><span class="nt">backoffLimit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span><span class="w"></span>
</code></pre></div>
Result 
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>$ kubectl get pod &lt;pod-name&gt;
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="c1"># example </span>
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>NAME              READY   STATUS       RESTARTS   AGE   IP          NODE      NOMINATED NODE   READINESS GATES
</code></pre></div></p>
<h2 id="7-cronjob">7. CronJob</h2>
<p>A CronJob creates Jobs on a repeating schedule just like crontab on Linux.  </p>
<p><strong>IMPORTANT</strong><br />
All CronJob schedule: times are based on the timezone of the <strong>kube-controller-manager</strong>.</p>
<div class="highlight"><span class="filename">example.yaml</span><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">batch/v1</span><span class="w"></span>
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CronJob</span><span class="w"></span>
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nginx-cronjob</span><span class="w"></span>
<a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a><span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a><span class="w">  </span><span class="nt">schedule</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">*&quot;</span><span class="w"></span>
<a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a><span class="w">  </span><span class="nt">concurrencyPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Allow</span><span class="w"> </span><span class="c1"># Forbid  # allow cronjob to run concurrently if needed</span><span class="w"></span>
<a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a><span class="w">  </span><span class="nt">startDeadlineSeconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">500</span><span class="w"></span>
<a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a><span class="w">  </span><span class="nt">successfulJobsHistoryLimit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span><span class="w"> </span><span class="c1"># only keep 3 succesful pod history run by cronjob when kubctl get pod &lt;pod-name&gt;</span><span class="w"></span>
<a id="__codelineno-28-10" name="__codelineno-28-10" href="#__codelineno-28-10"></a><span class="w">  </span><span class="nt">jobTemplate</span><span class="p">:</span><span class="w"> </span>
<a id="__codelineno-28-11" name="__codelineno-28-11" href="#__codelineno-28-11"></a><span class="w">    </span><span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-28-12" name="__codelineno-28-12" href="#__codelineno-28-12"></a><span class="w">      </span><span class="nt">template</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-28-13" name="__codelineno-28-13" href="#__codelineno-28-13"></a><span class="w">        </span><span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-28-14" name="__codelineno-28-14" href="#__codelineno-28-14"></a><span class="w">          </span><span class="nt">containers</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-28-15" name="__codelineno-28-15" href="#__codelineno-28-15"></a><span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">centos-container</span><span class="w"></span>
<a id="__codelineno-28-16" name="__codelineno-28-16" href="#__codelineno-28-16"></a><span class="w">              </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">centos:7</span><span class="w"></span>
<a id="__codelineno-28-17" name="__codelineno-28-17" href="#__codelineno-28-17"></a><span class="w">              </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;bash&quot;</span><span class="p p-Indicator">]</span><span class="w"></span>
<a id="__codelineno-28-18" name="__codelineno-28-18" href="#__codelineno-28-18"></a><span class="w">              </span><span class="nt">args</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-28-19" name="__codelineno-28-19" href="#__codelineno-28-19"></a><span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;-c&quot;</span><span class="w"></span>
<a id="__codelineno-28-20" name="__codelineno-28-20" href="#__codelineno-28-20"></a><span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;echo</span><span class="nv"> </span><span class="s">&#39;Hello&#39;;</span><span class="nv"> </span><span class="s">sleep</span><span class="nv"> </span><span class="s">10;</span><span class="nv"> </span><span class="s">echo</span><span class="nv"> </span><span class="s">&#39;bye&#39;&quot;</span><span class="w"></span>
<a id="__codelineno-28-21" name="__codelineno-28-21" href="#__codelineno-28-21"></a><span class="w">          </span><span class="nt">restartPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Never</span><span class="w"></span>
<a id="__codelineno-28-22" name="__codelineno-28-22" href="#__codelineno-28-22"></a><span class="w">      </span><span class="nt">backoffLimit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span><span class="w"></span>
</code></pre></div>
<h4 id="cron-schedule-syntax">Cron schedule syntax</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a># ┌───────────── minute (0 - 59)
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a># │ ┌───────────── hour (0 - 23)
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a># │ │ ┌───────────── day of the month (1 - 31)
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a># │ │ │ ┌───────────── month (1 - 12)
<a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a># │ │ │ │ ┌───────────── day of the week (0 - 6) (Sunday to Saturday;
<a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a># │ │ │ │ │                                   7 is also Sunday on some systems)
<a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a># │ │ │ │ │                                   OR sun, mon, tue, wed, thu, fri, sat
<a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a># │ │ │ │ │
<a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a># * * * * *
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Example</p>
<p>every weekday at 3:00 am<br />
0 3 * <em> 1-5<br />
every weekend at 3:00 am<br />
0 3 * </em> 0,6<br />
every 5 minute<br />
<em>/5 * </em> * *</p>
</div>



  



                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
      
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" hidden>
      
        
        <a href="../" class="md-footer__link md-footer__link--prev" aria-label="Previous: Kubernetes Notes" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Kubernetes Notes
            </div>
          </div>
        </a>
      
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 sungkimm - <a href="#__consent">Change cookie settings</a>

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    <a href="https://github.com/sungkimm" target="_blank" rel="noopener" title="sungkimm&#39;s Github" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            


  
    
  



<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input type="checkbox" class="md-toggle" id="__settings">
<div class="md-consent__settings">
  <ul class="task-list">
    
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="github" checked>
          <span class="task-list-indicator"></span>
          GitHub
        <label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
      <button type="reset" class="md-button md-button--primary">Reject</button>
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);console.log(new FormData(form)),__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.sticky", "navigation.indexes", "navigation.top", "toc.follow", "search.suggest", "search.highlight", "header.autohide", "announce.dismiss", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.8492ddcf.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>